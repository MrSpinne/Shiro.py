dist: xenial
language: python
python:
  - "3.7"

addons:
  apt:
    packages:
      - oracle-java8-installer

env:
  - POSTGRES_HOST=localhost POSTGRES_PORT=5432 POSTGRES_DATABASE=shiro POSTGRES_USER=shiro POSTGRES_PASSWORD=shiro

services:
  - postgresql

before_install:
  - psql -c "CREATE DATABASE $POSTGRES_DATABASE;" -U postgres
  - psql -c "CREATE USER $POSTGRES_USER WITH PASSWORD '$POSTGRES_PASSWORD';" -U postgres
  - git clone https://github.com/Frederikam/Lavalink/releases/download/3.2.1.1/Lavalink.jar

install:
  - pip install -r requirements.txt

script:
  - python shiro.py